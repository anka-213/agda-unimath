---
title: Perfect Images
---

<pre class="Agda"><a id="40" class="Symbol">{-#</a> <a id="44" class="Keyword">OPTIONS</a> <a id="52" class="Pragma">--without-K</a> <a id="64" class="Pragma">--exact-split</a> <a id="78" class="Symbol">#-}</a>

<a id="83" class="Keyword">module</a> <a id="90" href="foundation.perfect-images.html" class="Module">foundation.perfect-images</a> <a id="116" class="Keyword">where</a>

<a id="123" class="Keyword">open</a> <a id="128" class="Keyword">import</a> <a id="135" href="elementary-number-theory.natural-numbers.html" class="Module">elementary-number-theory.natural-numbers</a> <a id="176" class="Keyword">using</a> <a id="182" class="Symbol">(</a><a id="183" href="elementary-number-theory.natural-numbers.html#1444" class="Datatype">ℕ</a><a id="184" class="Symbol">;</a> <a id="186" href="elementary-number-theory.natural-numbers.html#1465" class="InductiveConstructor">zero-ℕ</a><a id="192" class="Symbol">;</a> <a id="194" href="elementary-number-theory.natural-numbers.html#1478" class="InductiveConstructor">succ-ℕ</a><a id="200" class="Symbol">)</a>

<a id="203" class="Keyword">open</a> <a id="208" class="Keyword">import</a> <a id="215" href="foundation.cartesian-product-types.html" class="Module">foundation.cartesian-product-types</a> <a id="250" class="Keyword">using</a> <a id="256" class="Symbol">(</a><a id="257" href="foundation-core.cartesian-product-types.html#577" class="Function Operator">_×_</a><a id="260" class="Symbol">)</a>
<a id="262" class="Keyword">open</a> <a id="267" class="Keyword">import</a> <a id="274" href="foundation.coproduct-types.html" class="Module">foundation.coproduct-types</a> <a id="301" class="Keyword">using</a> <a id="307" class="Symbol">(</a><a id="308" href="foundation.coproduct-types.html#1168" class="Datatype">coprod</a><a id="314" class="Symbol">;</a> <a id="316" href="foundation.coproduct-types.html#1239" class="InductiveConstructor">inl</a><a id="319" class="Symbol">;</a> <a id="321" href="foundation.coproduct-types.html#1262" class="InductiveConstructor">inr</a><a id="324" class="Symbol">;</a> <a id="326" href="foundation.coproduct-types.html#1284" class="Function">ind-coprod</a><a id="336" class="Symbol">)</a>
<a id="338" class="Keyword">open</a> <a id="343" class="Keyword">import</a> <a id="350" href="foundation.decidable-types.html" class="Module">foundation.decidable-types</a> <a id="377" class="Keyword">using</a>
  <a id="385" class="Symbol">(</a><a id="386" href="foundation.decidable-types.html#1905" class="Function">is-decidable</a><a id="398" class="Symbol">;</a> <a id="400" href="foundation.decidable-types.html#6083" class="Function">dn-elim-is-decidable</a><a id="420" class="Symbol">)</a>
<a id="422" class="Keyword">open</a> <a id="427" class="Keyword">import</a> <a id="434" href="foundation.dependent-pair-types.html" class="Module">foundation.dependent-pair-types</a> <a id="466" class="Keyword">using</a> <a id="472" class="Symbol">(</a><a id="473" href="foundation-core.dependent-pair-types.html#502" class="Record">Σ</a><a id="474" class="Symbol">;</a> <a id="476" href="foundation-core.dependent-pair-types.html#575" class="InductiveConstructor">pair</a><a id="480" class="Symbol">;</a> <a id="482" href="foundation-core.dependent-pair-types.html#592" class="Field">pr1</a><a id="485" class="Symbol">;</a> <a id="487" href="foundation-core.dependent-pair-types.html#604" class="Field">pr2</a><a id="490" class="Symbol">)</a>
<a id="492" class="Keyword">open</a> <a id="497" class="Keyword">import</a> <a id="504" href="foundation.double-negation.html" class="Module">foundation.double-negation</a> <a id="531" class="Keyword">using</a> <a id="537" class="Symbol">(</a><a id="538" href="foundation.double-negation.html#806" class="Function">¬¬</a><a id="540" class="Symbol">)</a>
<a id="542" class="Keyword">open</a> <a id="547" class="Keyword">import</a> <a id="554" href="foundation.embeddings.html" class="Module">foundation.embeddings</a>
<a id="576" class="Keyword">open</a> <a id="581" class="Keyword">import</a> <a id="588" href="foundation.empty-types.html" class="Module">foundation.empty-types</a> <a id="611" class="Keyword">using</a> <a id="617" class="Symbol">(</a><a id="618" href="foundation-core.empty-types.html#1147" class="Function">ex-falso</a><a id="626" class="Symbol">)</a>
<a id="628" class="Keyword">open</a> <a id="633" class="Keyword">import</a> <a id="640" href="foundation.fibers-of-maps.html" class="Module">foundation.fibers-of-maps</a> <a id="666" class="Keyword">using</a><a id="671" class="Symbol">(</a><a id="672" href="foundation-core.fibers-of-maps.html#928" class="Function">fib</a><a id="675" class="Symbol">)</a>
<a id="677" class="Keyword">open</a> <a id="682" class="Keyword">import</a> <a id="689" href="foundation.functions.html" class="Module">foundation.functions</a> <a id="710" class="Keyword">using</a> <a id="716" class="Symbol">(</a><a id="717" href="foundation-core.functions.html#309" class="Function">id</a><a id="719" class="Symbol">;</a> <a id="721" href="foundation-core.functions.html#407" class="Function Operator">_∘_</a><a id="724" class="Symbol">)</a>
<a id="726" class="Keyword">open</a> <a id="731" class="Keyword">import</a> <a id="738" href="foundation.identity-types.html" class="Module">foundation.identity-types</a> <a id="764" class="Keyword">using</a> <a id="770" class="Symbol">(</a><a id="771" href="foundation-core.identity-types.html#1754" class="Datatype">Id</a><a id="773" class="Symbol">;</a> <a id="775" href="foundation-core.identity-types.html#1807" class="InductiveConstructor">refl</a><a id="779" class="Symbol">;</a> <a id="781" href="foundation-core.identity-types.html#2716" class="Function">inv</a><a id="784" class="Symbol">;</a> <a id="786" href="foundation-core.identity-types.html#4017" class="Function">ap</a><a id="788" class="Symbol">;</a> <a id="790" href="foundation-core.identity-types.html#2412" class="Function Operator">_∙_</a><a id="793" class="Symbol">;</a> <a id="795" href="foundation-core.identity-types.html#5747" class="Function">tr</a><a id="797" class="Symbol">)</a>
<a id="799" class="Keyword">open</a> <a id="804" class="Keyword">import</a> <a id="811" href="foundation.injective-maps.html" class="Module">foundation.injective-maps</a> <a id="837" class="Keyword">using</a> <a id="843" class="Symbol">(</a><a id="844" href="foundation.injective-maps.html#1295" class="Function">is-injective</a><a id="856" class="Symbol">;</a> <a id="858" href="foundation.injective-maps.html#3649" class="Function">is-injective-is-emb</a><a id="877" class="Symbol">)</a>
<a id="879" class="Keyword">open</a> <a id="884" class="Keyword">import</a> <a id="891" href="foundation.iterating-functions.html" class="Module">foundation.iterating-functions</a>
<a id="922" class="Keyword">open</a> <a id="927" class="Keyword">import</a> <a id="934" href="foundation.law-of-excluded-middle.html" class="Module">foundation.law-of-excluded-middle</a> <a id="968" class="Keyword">using</a> <a id="974" class="Symbol">(</a><a id="975" href="foundation.law-of-excluded-middle.html#733" class="Function">LEM</a><a id="978" class="Symbol">)</a>
<a id="980" class="Keyword">open</a> <a id="985" class="Keyword">import</a> <a id="992" href="foundation.negation.html" class="Module">foundation.negation</a> <a id="1012" class="Keyword">using</a> <a id="1018" class="Symbol">(</a><a id="1019" href="foundation-core.negation.html#452" class="Function">¬</a><a id="1020" class="Symbol">;</a> <a id="1022" href="foundation.negation.html#942" class="Function">is-prop-neg</a><a id="1033" class="Symbol">)</a>
<a id="1035" class="Keyword">open</a> <a id="1040" class="Keyword">import</a> <a id="1047" href="foundation.propositions.html" class="Module">foundation.propositions</a> <a id="1071" class="Keyword">using</a>
  <a id="1079" class="Symbol">(</a><a id="1080" href="foundation-core.propositions.html#1295" class="Function">is-prop</a><a id="1087" class="Symbol">;</a> <a id="1089" href="foundation-core.propositions.html#2608" class="Function">eq-is-prop&#39;</a><a id="1100" class="Symbol">;</a> <a id="1102" href="foundation-core.propositions.html#6147" class="Function">is-prop-Π</a><a id="1111" class="Symbol">;</a> <a id="1113" href="foundation-core.propositions.html#5070" class="Function">is-prop-Σ</a><a id="1122" class="Symbol">;</a> <a id="1124" href="foundation-core.propositions.html#1380" class="Function">UU-Prop</a><a id="1131" class="Symbol">)</a>
<a id="1133" class="Keyword">open</a> <a id="1138" class="Keyword">import</a> <a id="1145" href="foundation.propositional-maps.html" class="Module">foundation.propositional-maps</a> <a id="1175" class="Keyword">using</a> <a id="1181" class="Symbol">(</a><a id="1182" href="foundation-core.propositional-maps.html#1866" class="Function">is-prop-map-is-emb</a><a id="1200" class="Symbol">)</a>
<a id="1202" class="Keyword">open</a> <a id="1207" class="Keyword">import</a> <a id="1214" href="foundation.universe-levels.html" class="Module">foundation.universe-levels</a> <a id="1241" class="Keyword">using</a> <a id="1247" class="Symbol">(</a><a id="1248" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="1253" class="Symbol">;</a> <a id="1255" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a><a id="1257" class="Symbol">;</a> <a id="1259" href="Agda.Primitive.html#810" class="Primitive Operator">_⊔_</a><a id="1262" class="Symbol">)</a>
</pre>
## Idea

Consider two maps `f : A → B` and `g : B → A`. For `(g ◦ f ) ^ n (a₀) = a`, consider also the following chain
 
  `a₀ --> f (a₀) --> g (f (a₀)) --> f (g (f (a₀))) --> ... --> (g ◦ f ) ^ n (a₀) = a`

We say `a₀` is an origin for `a`, and  `a` is `perfect image` for `g` if any origin of `a` is in the image of `g`.

## Definition

<pre class="Agda"><a id="1616" class="Keyword">module</a> <a id="1623" href="foundation.perfect-images.html#1623" class="Module">_</a>
  <a id="1627" class="Symbol">{</a><a id="1628" href="foundation.perfect-images.html#1628" class="Bound">l1</a> <a id="1631" href="foundation.perfect-images.html#1631" class="Bound">l2</a> <a id="1634" class="Symbol">:</a> <a id="1636" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="1641" class="Symbol">}</a> <a id="1643" class="Symbol">{</a><a id="1644" href="foundation.perfect-images.html#1644" class="Bound">A</a> <a id="1646" class="Symbol">:</a> <a id="1648" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="1651" href="foundation.perfect-images.html#1628" class="Bound">l1</a><a id="1653" class="Symbol">}</a> <a id="1655" class="Symbol">{</a><a id="1656" href="foundation.perfect-images.html#1656" class="Bound">B</a> <a id="1658" class="Symbol">:</a> <a id="1660" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="1663" href="foundation.perfect-images.html#1631" class="Bound">l2</a><a id="1665" class="Symbol">}</a> <a id="1667" class="Symbol">(</a><a id="1668" href="foundation.perfect-images.html#1668" class="Bound">f</a> <a id="1670" class="Symbol">:</a> <a id="1672" href="foundation.perfect-images.html#1644" class="Bound">A</a> <a id="1674" class="Symbol">→</a> <a id="1676" href="foundation.perfect-images.html#1656" class="Bound">B</a><a id="1677" class="Symbol">)</a> <a id="1679" class="Symbol">(</a><a id="1680" href="foundation.perfect-images.html#1680" class="Bound">g</a> <a id="1682" class="Symbol">:</a> <a id="1684" href="foundation.perfect-images.html#1656" class="Bound">B</a> <a id="1686" class="Symbol">→</a> <a id="1688" href="foundation.perfect-images.html#1644" class="Bound">A</a><a id="1689" class="Symbol">)</a>
  <a id="1693" class="Keyword">where</a>

  <a id="1702" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="1719" class="Symbol">:</a> <a id="1721" class="Symbol">(</a><a id="1722" href="foundation.perfect-images.html#1722" class="Bound">a</a> <a id="1724" class="Symbol">:</a> <a id="1726" href="foundation.perfect-images.html#1644" class="Bound">A</a><a id="1727" class="Symbol">)</a> <a id="1729" class="Symbol">→</a>  <a id="1732" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="1735" class="Symbol">(</a><a id="1736" href="foundation.perfect-images.html#1628" class="Bound">l1</a> <a id="1739" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="1741" href="foundation.perfect-images.html#1631" class="Bound">l2</a><a id="1743" class="Symbol">)</a>
  <a id="1747" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="1764" href="foundation.perfect-images.html#1764" class="Bound">a</a> <a id="1766" class="Symbol">=</a>
    <a id="1772" class="Symbol">(</a><a id="1773" href="foundation.perfect-images.html#1773" class="Bound">a₀</a> <a id="1776" class="Symbol">:</a> <a id="1778" href="foundation.perfect-images.html#1644" class="Bound">A</a><a id="1779" class="Symbol">)</a> <a id="1781" class="Symbol">(</a><a id="1782" href="foundation.perfect-images.html#1782" class="Bound">n</a> <a id="1784" class="Symbol">:</a> <a id="1786" href="elementary-number-theory.natural-numbers.html#1444" class="Datatype">ℕ</a><a id="1787" class="Symbol">)</a> <a id="1789" class="Symbol">→</a> <a id="1791" href="foundation-core.identity-types.html#1754" class="Datatype">Id</a> <a id="1794" class="Symbol">((</a><a id="1796" href="foundation.iterating-functions.html#1797" class="Function">iterate</a> <a id="1804" href="foundation.perfect-images.html#1782" class="Bound">n</a> <a id="1806" class="Symbol">(</a><a id="1807" href="foundation.perfect-images.html#1680" class="Bound">g</a> <a id="1809" href="foundation-core.functions.html#407" class="Function Operator">∘</a> <a id="1811" href="foundation.perfect-images.html#1668" class="Bound">f</a><a id="1812" class="Symbol">))</a> <a id="1815" href="foundation.perfect-images.html#1773" class="Bound">a₀</a><a id="1817" class="Symbol">)</a> <a id="1819" href="foundation.perfect-images.html#1764" class="Bound">a</a> <a id="1821" class="Symbol">→</a> <a id="1823" href="foundation-core.fibers-of-maps.html#928" class="Function">fib</a> <a id="1827" href="foundation.perfect-images.html#1680" class="Bound">g</a> <a id="1829" href="foundation.perfect-images.html#1773" class="Bound">a₀</a>
</pre>
## Properties

If `g` is an embedding, then `is-perfect-image a` is a proposition. In this case, if we assume law of exluded middle, we can show `is-perfect-image a` is a decidable type for any `a : A`.

<pre class="Agda"><a id="2049" class="Keyword">module</a> <a id="2056" href="foundation.perfect-images.html#2056" class="Module">_</a>
  <a id="2060" class="Symbol">{</a><a id="2061" href="foundation.perfect-images.html#2061" class="Bound">l1</a> <a id="2064" href="foundation.perfect-images.html#2064" class="Bound">l2</a> <a id="2067" class="Symbol">:</a> <a id="2069" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="2074" class="Symbol">}</a> <a id="2076" class="Symbol">{</a><a id="2077" href="foundation.perfect-images.html#2077" class="Bound">A</a> <a id="2079" class="Symbol">:</a> <a id="2081" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="2084" href="foundation.perfect-images.html#2061" class="Bound">l1</a><a id="2086" class="Symbol">}</a> <a id="2088" class="Symbol">{</a><a id="2089" href="foundation.perfect-images.html#2089" class="Bound">B</a> <a id="2091" class="Symbol">:</a> <a id="2093" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="2096" href="foundation.perfect-images.html#2064" class="Bound">l2</a><a id="2098" class="Symbol">}</a>
  <a id="2102" class="Symbol">{</a><a id="2103" href="foundation.perfect-images.html#2103" class="Bound">f</a> <a id="2105" class="Symbol">:</a> <a id="2107" href="foundation.perfect-images.html#2077" class="Bound">A</a> <a id="2109" class="Symbol">→</a> <a id="2111" href="foundation.perfect-images.html#2089" class="Bound">B</a><a id="2112" class="Symbol">}</a> <a id="2114" class="Symbol">{</a><a id="2115" href="foundation.perfect-images.html#2115" class="Bound">g</a> <a id="2117" class="Symbol">:</a> <a id="2119" href="foundation.perfect-images.html#2089" class="Bound">B</a> <a id="2121" class="Symbol">→</a> <a id="2123" href="foundation.perfect-images.html#2077" class="Bound">A</a><a id="2124" class="Symbol">}</a> <a id="2126" class="Symbol">(</a><a id="2127" href="foundation.perfect-images.html#2127" class="Bound">is-emb-g</a> <a id="2136" class="Symbol">:</a> <a id="2138" href="foundation-core.embeddings.html#980" class="Function">is-emb</a> <a id="2145" href="foundation.perfect-images.html#2115" class="Bound">g</a><a id="2146" class="Symbol">)</a>
  <a id="2150" class="Keyword">where</a>

  <a id="2159" href="foundation.perfect-images.html#2159" class="Function">is-prop-is-perfect-image-is-emb</a> <a id="2191" class="Symbol">:</a>
    <a id="2197" class="Symbol">(</a><a id="2198" href="foundation.perfect-images.html#2198" class="Bound">a</a> <a id="2200" class="Symbol">:</a> <a id="2202" href="foundation.perfect-images.html#2077" class="Bound">A</a><a id="2203" class="Symbol">)</a> <a id="2205" class="Symbol">→</a> <a id="2207" href="foundation-core.propositions.html#1295" class="Function">is-prop</a> <a id="2215" class="Symbol">(</a><a id="2216" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="2233" href="foundation.perfect-images.html#2103" class="Bound">f</a> <a id="2235" href="foundation.perfect-images.html#2115" class="Bound">g</a> <a id="2237" href="foundation.perfect-images.html#2198" class="Bound">a</a><a id="2238" class="Symbol">)</a>
  <a id="2242" href="foundation.perfect-images.html#2159" class="Function">is-prop-is-perfect-image-is-emb</a> <a id="2274" href="foundation.perfect-images.html#2274" class="Bound">a</a> <a id="2276" class="Symbol">=</a>
     <a id="2283" href="foundation-core.propositions.html#6147" class="Function">is-prop-Π</a> <a id="2293" class="Symbol">(λ</a> <a id="2296" href="foundation.perfect-images.html#2296" class="Bound">a₀</a> <a id="2299" class="Symbol">→</a> <a id="2301" class="Symbol">(</a><a id="2302" href="foundation-core.propositions.html#6147" class="Function">is-prop-Π</a> <a id="2312" class="Symbol">λ</a> <a id="2314" href="foundation.perfect-images.html#2314" class="Bound">n</a> <a id="2316" class="Symbol">→</a>
        <a id="2326" href="foundation-core.propositions.html#6147" class="Function">is-prop-Π</a> <a id="2336" class="Symbol">(λ</a> <a id="2339" href="foundation.perfect-images.html#2339" class="Bound">p</a> <a id="2341" class="Symbol">→</a> <a id="2343" class="Symbol">(</a><a id="2344" href="foundation-core.propositional-maps.html#1866" class="Function">is-prop-map-is-emb</a> <a id="2363" href="foundation.perfect-images.html#2127" class="Bound">is-emb-g</a> <a id="2372" href="foundation.perfect-images.html#2296" class="Bound">a₀</a><a id="2374" class="Symbol">))))</a>

  <a id="2382" href="foundation.perfect-images.html#2382" class="Function">is-perfect-image-Prop</a> <a id="2404" class="Symbol">:</a> <a id="2406" href="foundation.perfect-images.html#2077" class="Bound">A</a> <a id="2408" class="Symbol">→</a> <a id="2410" href="foundation-core.propositions.html#1380" class="Function">UU-Prop</a> <a id="2418" class="Symbol">(</a><a id="2419" href="foundation.perfect-images.html#2061" class="Bound">l1</a> <a id="2422" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2424" href="foundation.perfect-images.html#2064" class="Bound">l2</a><a id="2426" class="Symbol">)</a>
  <a id="2430" href="foundation-core.dependent-pair-types.html#592" class="Field">pr1</a> <a id="2434" class="Symbol">(</a><a id="2435" href="foundation.perfect-images.html#2382" class="Function">is-perfect-image-Prop</a> <a id="2457" href="foundation.perfect-images.html#2457" class="Bound">a</a><a id="2458" class="Symbol">)</a> <a id="2460" class="Symbol">=</a> <a id="2462" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="2479" href="foundation.perfect-images.html#2103" class="Bound">f</a> <a id="2481" href="foundation.perfect-images.html#2115" class="Bound">g</a> <a id="2483" href="foundation.perfect-images.html#2457" class="Bound">a</a>
  <a id="2487" href="foundation-core.dependent-pair-types.html#604" class="Field">pr2</a> <a id="2491" class="Symbol">(</a><a id="2492" href="foundation.perfect-images.html#2382" class="Function">is-perfect-image-Prop</a> <a id="2514" href="foundation.perfect-images.html#2514" class="Bound">a</a><a id="2515" class="Symbol">)</a> <a id="2517" class="Symbol">=</a> <a id="2519" href="foundation.perfect-images.html#2159" class="Function">is-prop-is-perfect-image-is-emb</a> <a id="2551" href="foundation.perfect-images.html#2514" class="Bound">a</a>

  <a id="2556" href="foundation.perfect-images.html#2556" class="Function">is-decidable-is-perfect-image-is-emb</a> <a id="2593" class="Symbol">:</a>
    <a id="2599" href="foundation.law-of-excluded-middle.html#733" class="Function">LEM</a> <a id="2603" class="Symbol">(</a><a id="2604" href="foundation.perfect-images.html#2061" class="Bound">l1</a> <a id="2607" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="2609" href="foundation.perfect-images.html#2064" class="Bound">l2</a><a id="2611" class="Symbol">)</a> <a id="2613" class="Symbol">→</a> <a id="2615" class="Symbol">(</a><a id="2616" href="foundation.perfect-images.html#2616" class="Bound">a</a> <a id="2618" class="Symbol">:</a> <a id="2620" href="foundation.perfect-images.html#2077" class="Bound">A</a><a id="2621" class="Symbol">)</a> <a id="2623" class="Symbol">→</a> <a id="2625" href="foundation.decidable-types.html#1905" class="Function">is-decidable</a> <a id="2638" class="Symbol">(</a><a id="2639" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="2656" href="foundation.perfect-images.html#2103" class="Bound">f</a> <a id="2658" href="foundation.perfect-images.html#2115" class="Bound">g</a> <a id="2660" href="foundation.perfect-images.html#2616" class="Bound">a</a><a id="2661" class="Symbol">)</a>
  <a id="2665" href="foundation.perfect-images.html#2556" class="Function">is-decidable-is-perfect-image-is-emb</a> <a id="2702" href="foundation.perfect-images.html#2702" class="Bound">lem</a> <a id="2706" href="foundation.perfect-images.html#2706" class="Bound">a</a> <a id="2708" class="Symbol">=</a>
    <a id="2714" href="foundation.perfect-images.html#2702" class="Bound">lem</a> <a id="2718" class="Symbol">(</a><a id="2719" href="foundation.perfect-images.html#2382" class="Function">is-perfect-image-Prop</a> <a id="2741" href="foundation.perfect-images.html#2706" class="Bound">a</a><a id="2742" class="Symbol">)</a>  
</pre>
If `a` is a perfect image for `g`, then `a` has a preimage under `g`. Just take n=zero in the definition.

<pre class="Agda"><a id="2866" class="Keyword">module</a> <a id="2873" href="foundation.perfect-images.html#2873" class="Module">_</a>
  <a id="2877" class="Symbol">{</a><a id="2878" href="foundation.perfect-images.html#2878" class="Bound">l1</a> <a id="2881" href="foundation.perfect-images.html#2881" class="Bound">l2</a> <a id="2884" class="Symbol">:</a> <a id="2886" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="2891" class="Symbol">}</a> <a id="2893" class="Symbol">{</a><a id="2894" href="foundation.perfect-images.html#2894" class="Bound">A</a> <a id="2896" class="Symbol">:</a> <a id="2898" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="2901" href="foundation.perfect-images.html#2878" class="Bound">l1</a><a id="2903" class="Symbol">}</a> <a id="2905" class="Symbol">{</a><a id="2906" href="foundation.perfect-images.html#2906" class="Bound">B</a> <a id="2908" class="Symbol">:</a> <a id="2910" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="2913" href="foundation.perfect-images.html#2881" class="Bound">l2</a><a id="2915" class="Symbol">}</a>  
  <a id="2921" class="Keyword">where</a>

  <a id="2930" href="foundation.perfect-images.html#2930" class="Function">is-perfect-image-is-fib</a> <a id="2954" class="Symbol">:</a>
    <a id="2960" class="Symbol">{</a><a id="2961" href="foundation.perfect-images.html#2961" class="Bound">f</a> <a id="2963" class="Symbol">:</a> <a id="2965" href="foundation.perfect-images.html#2894" class="Bound">A</a> <a id="2967" class="Symbol">→</a> <a id="2969" href="foundation.perfect-images.html#2906" class="Bound">B</a><a id="2970" class="Symbol">}</a> <a id="2972" class="Symbol">{</a><a id="2973" href="foundation.perfect-images.html#2973" class="Bound">g</a> <a id="2975" class="Symbol">:</a> <a id="2977" href="foundation.perfect-images.html#2906" class="Bound">B</a> <a id="2979" class="Symbol">→</a> <a id="2981" href="foundation.perfect-images.html#2894" class="Bound">A</a><a id="2982" class="Symbol">}</a> <a id="2984" class="Symbol">→</a> <a id="2986" class="Symbol">(</a><a id="2987" href="foundation.perfect-images.html#2987" class="Bound">a</a> <a id="2989" class="Symbol">:</a> <a id="2991" href="foundation.perfect-images.html#2894" class="Bound">A</a><a id="2992" class="Symbol">)</a> <a id="2994" class="Symbol">→</a>
    <a id="3000" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="3017" href="foundation.perfect-images.html#2961" class="Bound">f</a> <a id="3019" href="foundation.perfect-images.html#2973" class="Bound">g</a> <a id="3021" href="foundation.perfect-images.html#2987" class="Bound">a</a> <a id="3023" class="Symbol">→</a> <a id="3025" href="foundation-core.fibers-of-maps.html#928" class="Function">fib</a> <a id="3029" href="foundation.perfect-images.html#2973" class="Bound">g</a> <a id="3031" href="foundation.perfect-images.html#2987" class="Bound">a</a>
  <a id="3035" href="foundation.perfect-images.html#2930" class="Function">is-perfect-image-is-fib</a> <a id="3059" href="foundation.perfect-images.html#3059" class="Bound">a</a> <a id="3061" href="foundation.perfect-images.html#3061" class="Bound">ρ</a> <a id="3063" class="Symbol">=</a> <a id="3065" href="foundation.perfect-images.html#3061" class="Bound">ρ</a> <a id="3067" href="foundation.perfect-images.html#3059" class="Bound">a</a> <a id="3069" class="Number">0</a> <a id="3071" href="foundation-core.identity-types.html#1807" class="InductiveConstructor">refl</a>  
</pre>
One can define a map from `A` to `B` restricting the domain to the perfect images of `g`. This gives a kind of section of g. When g is also an embedding, the map gives a kind of retraction of g.

<pre class="Agda"><a id="3287" class="Keyword">module</a> <a id="3294" href="foundation.perfect-images.html#3294" class="Module">_</a>
  <a id="3298" class="Symbol">{</a><a id="3299" href="foundation.perfect-images.html#3299" class="Bound">l1</a> <a id="3302" href="foundation.perfect-images.html#3302" class="Bound">l2</a> <a id="3305" class="Symbol">:</a> <a id="3307" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="3312" class="Symbol">}</a> <a id="3314" class="Symbol">{</a><a id="3315" href="foundation.perfect-images.html#3315" class="Bound">A</a> <a id="3317" class="Symbol">:</a> <a id="3319" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="3322" href="foundation.perfect-images.html#3299" class="Bound">l1</a><a id="3324" class="Symbol">}</a> <a id="3326" class="Symbol">{</a><a id="3327" href="foundation.perfect-images.html#3327" class="Bound">B</a> <a id="3329" class="Symbol">:</a> <a id="3331" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="3334" href="foundation.perfect-images.html#3302" class="Bound">l2</a><a id="3336" class="Symbol">}</a> <a id="3338" class="Symbol">{</a><a id="3339" href="foundation.perfect-images.html#3339" class="Bound">f</a> <a id="3341" class="Symbol">:</a> <a id="3343" href="foundation.perfect-images.html#3315" class="Bound">A</a> <a id="3345" class="Symbol">→</a> <a id="3347" href="foundation.perfect-images.html#3327" class="Bound">B</a><a id="3348" class="Symbol">}</a> <a id="3350" class="Symbol">{</a><a id="3351" href="foundation.perfect-images.html#3351" class="Bound">g</a> <a id="3353" class="Symbol">:</a> <a id="3355" href="foundation.perfect-images.html#3327" class="Bound">B</a> <a id="3357" class="Symbol">→</a> <a id="3359" href="foundation.perfect-images.html#3315" class="Bound">A</a><a id="3360" class="Symbol">}</a>
  <a id="3364" class="Keyword">where</a>

  <a id="3373" href="foundation.perfect-images.html#3373" class="Function">inverse-of-perfect-image</a> <a id="3398" class="Symbol">:</a>
    <a id="3404" class="Symbol">(</a><a id="3405" href="foundation.perfect-images.html#3405" class="Bound">a</a> <a id="3407" class="Symbol">:</a> <a id="3409" href="foundation.perfect-images.html#3315" class="Bound">A</a><a id="3410" class="Symbol">)</a> <a id="3412" class="Symbol">→</a> <a id="3414" class="Symbol">(</a><a id="3415" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="3432" href="foundation.perfect-images.html#3339" class="Bound">f</a> <a id="3434" href="foundation.perfect-images.html#3351" class="Bound">g</a> <a id="3436" href="foundation.perfect-images.html#3405" class="Bound">a</a><a id="3437" class="Symbol">)</a> <a id="3439" class="Symbol">→</a> <a id="3441" href="foundation.perfect-images.html#3327" class="Bound">B</a>
  <a id="3445" href="foundation.perfect-images.html#3373" class="Function">inverse-of-perfect-image</a> <a id="3470" href="foundation.perfect-images.html#3470" class="Bound">a</a> <a id="3472" href="foundation.perfect-images.html#3472" class="Bound">ρ</a> <a id="3474" class="Symbol">=</a>
    <a id="3480" href="foundation-core.dependent-pair-types.html#592" class="Field">pr1</a> <a id="3484" class="Symbol">(</a><a id="3485" href="foundation.perfect-images.html#2930" class="Function">is-perfect-image-is-fib</a> <a id="3509" href="foundation.perfect-images.html#3470" class="Bound">a</a> <a id="3511" href="foundation.perfect-images.html#3472" class="Bound">ρ</a><a id="3512" class="Symbol">)</a>

  <a id="3517" href="foundation.perfect-images.html#3517" class="Function">is-sec-inverse-of-perfect-image</a> <a id="3549" class="Symbol">:</a>
    <a id="3555" class="Symbol">(</a><a id="3556" href="foundation.perfect-images.html#3556" class="Bound">a</a> <a id="3558" class="Symbol">:</a> <a id="3560" href="foundation.perfect-images.html#3315" class="Bound">A</a><a id="3561" class="Symbol">)</a> <a id="3563" class="Symbol">(</a><a id="3564" href="foundation.perfect-images.html#3564" class="Bound">ρ</a> <a id="3566" class="Symbol">:</a> <a id="3568" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="3585" href="foundation.perfect-images.html#3339" class="Bound">f</a> <a id="3587" href="foundation.perfect-images.html#3351" class="Bound">g</a> <a id="3589" href="foundation.perfect-images.html#3556" class="Bound">a</a><a id="3590" class="Symbol">)</a> <a id="3592" class="Symbol">→</a>
    <a id="3598" href="foundation-core.identity-types.html#1754" class="Datatype">Id</a> <a id="3601" class="Symbol">(</a><a id="3602" href="foundation.perfect-images.html#3351" class="Bound">g</a> <a id="3604" class="Symbol">(</a><a id="3605" href="foundation.perfect-images.html#3373" class="Function">inverse-of-perfect-image</a> <a id="3630" href="foundation.perfect-images.html#3556" class="Bound">a</a> <a id="3632" href="foundation.perfect-images.html#3564" class="Bound">ρ</a><a id="3633" class="Symbol">))</a> <a id="3636" href="foundation.perfect-images.html#3556" class="Bound">a</a>
  <a id="3640" href="foundation.perfect-images.html#3517" class="Function">is-sec-inverse-of-perfect-image</a> <a id="3672" href="foundation.perfect-images.html#3672" class="Bound">a</a> <a id="3674" href="foundation.perfect-images.html#3674" class="Bound">ρ</a> <a id="3676" class="Symbol">=</a>
    <a id="3682" href="foundation-core.dependent-pair-types.html#604" class="Field">pr2</a> <a id="3686" class="Symbol">(</a><a id="3687" href="foundation.perfect-images.html#2930" class="Function">is-perfect-image-is-fib</a> <a id="3711" href="foundation.perfect-images.html#3672" class="Bound">a</a> <a id="3713" href="foundation.perfect-images.html#3674" class="Bound">ρ</a><a id="3714" class="Symbol">)</a>
</pre>
<pre class="Agda"><a id="3729" class="Keyword">module</a> <a id="3736" href="foundation.perfect-images.html#3736" class="Module">_</a>
  <a id="3740" class="Symbol">{</a><a id="3741" href="foundation.perfect-images.html#3741" class="Bound">l1</a> <a id="3744" href="foundation.perfect-images.html#3744" class="Bound">l2</a> <a id="3747" class="Symbol">:</a> <a id="3749" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="3754" class="Symbol">}</a> <a id="3756" class="Symbol">{</a><a id="3757" href="foundation.perfect-images.html#3757" class="Bound">A</a> <a id="3759" class="Symbol">:</a> <a id="3761" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="3764" href="foundation.perfect-images.html#3741" class="Bound">l1</a><a id="3766" class="Symbol">}</a> <a id="3768" class="Symbol">{</a><a id="3769" href="foundation.perfect-images.html#3769" class="Bound">B</a> <a id="3771" class="Symbol">:</a> <a id="3773" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="3776" href="foundation.perfect-images.html#3744" class="Bound">l2</a><a id="3778" class="Symbol">}</a>
  <a id="3782" class="Symbol">{</a><a id="3783" href="foundation.perfect-images.html#3783" class="Bound">f</a> <a id="3785" class="Symbol">:</a> <a id="3787" href="foundation.perfect-images.html#3757" class="Bound">A</a> <a id="3789" class="Symbol">→</a> <a id="3791" href="foundation.perfect-images.html#3769" class="Bound">B</a><a id="3792" class="Symbol">}</a> <a id="3794" class="Symbol">{</a><a id="3795" href="foundation.perfect-images.html#3795" class="Bound">g</a> <a id="3797" class="Symbol">:</a> <a id="3799" href="foundation.perfect-images.html#3769" class="Bound">B</a> <a id="3801" class="Symbol">→</a> <a id="3803" href="foundation.perfect-images.html#3757" class="Bound">A</a><a id="3804" class="Symbol">}</a> <a id="3806" class="Symbol">{</a><a id="3807" href="foundation.perfect-images.html#3807" class="Bound">is-emb-g</a> <a id="3816" class="Symbol">:</a> <a id="3818" href="foundation-core.embeddings.html#980" class="Function">is-emb</a> <a id="3825" href="foundation.perfect-images.html#3795" class="Bound">g</a><a id="3826" class="Symbol">}</a>
  <a id="3830" class="Keyword">where</a>

  <a id="3839" href="foundation.perfect-images.html#3839" class="Function">is-retr-inverse-of-perfect-image</a> <a id="3872" class="Symbol">:</a>
    <a id="3878" class="Symbol">(</a><a id="3879" href="foundation.perfect-images.html#3879" class="Bound">b</a> <a id="3881" class="Symbol">:</a> <a id="3883" href="foundation.perfect-images.html#3769" class="Bound">B</a><a id="3884" class="Symbol">)</a> <a id="3886" class="Symbol">(</a><a id="3887" href="foundation.perfect-images.html#3887" class="Bound">ρ</a> <a id="3889" class="Symbol">:</a> <a id="3891" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="3908" href="foundation.perfect-images.html#3783" class="Bound">f</a> <a id="3910" href="foundation.perfect-images.html#3795" class="Bound">g</a> <a id="3912" class="Symbol">(</a><a id="3913" href="foundation.perfect-images.html#3795" class="Bound">g</a> <a id="3915" href="foundation.perfect-images.html#3879" class="Bound">b</a><a id="3916" class="Symbol">))</a> <a id="3919" class="Symbol">→</a>
    <a id="3925" href="foundation-core.identity-types.html#1754" class="Datatype">Id</a> <a id="3928" class="Symbol">(</a><a id="3929" href="foundation.perfect-images.html#3373" class="Function">inverse-of-perfect-image</a> <a id="3954" class="Symbol">(</a><a id="3955" href="foundation.perfect-images.html#3795" class="Bound">g</a> <a id="3957" href="foundation.perfect-images.html#3879" class="Bound">b</a><a id="3958" class="Symbol">)</a> <a id="3960" href="foundation.perfect-images.html#3887" class="Bound">ρ</a><a id="3961" class="Symbol">)</a> <a id="3963" href="foundation.perfect-images.html#3879" class="Bound">b</a>
  <a id="3967" href="foundation.perfect-images.html#3839" class="Function">is-retr-inverse-of-perfect-image</a> <a id="4000" href="foundation.perfect-images.html#4000" class="Bound">b</a> <a id="4002" href="foundation.perfect-images.html#4002" class="Bound">ρ</a> <a id="4004" class="Symbol">=</a>
     <a id="4011" href="foundation.injective-maps.html#3649" class="Function">is-injective-is-emb</a>
       <a id="4038" href="foundation.perfect-images.html#3807" class="Bound">is-emb-g</a>
       <a id="4054" class="Symbol">(</a><a id="4055" href="foundation.perfect-images.html#3517" class="Function">is-sec-inverse-of-perfect-image</a> <a id="4087" class="Symbol">(</a><a id="4088" href="foundation.perfect-images.html#3795" class="Bound">g</a> <a id="4090" href="foundation.perfect-images.html#4000" class="Bound">b</a><a id="4091" class="Symbol">)</a> <a id="4093" href="foundation.perfect-images.html#4002" class="Bound">ρ</a><a id="4094" class="Symbol">)</a>
</pre>
If `g (f (a))` is a perfect image for `g`, so is `a`.

<pre class="Agda"><a id="4164" class="Keyword">module</a> <a id="4171" href="foundation.perfect-images.html#4171" class="Module">_</a>
  <a id="4175" class="Symbol">{</a><a id="4176" href="foundation.perfect-images.html#4176" class="Bound">l1</a> <a id="4179" href="foundation.perfect-images.html#4179" class="Bound">l2</a> <a id="4182" class="Symbol">:</a> <a id="4184" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="4189" class="Symbol">}</a> <a id="4191" class="Symbol">{</a><a id="4192" href="foundation.perfect-images.html#4192" class="Bound">A</a> <a id="4194" class="Symbol">:</a> <a id="4196" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="4199" href="foundation.perfect-images.html#4176" class="Bound">l1</a><a id="4201" class="Symbol">}</a> <a id="4203" class="Symbol">{</a><a id="4204" href="foundation.perfect-images.html#4204" class="Bound">B</a> <a id="4206" class="Symbol">:</a> <a id="4208" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="4211" href="foundation.perfect-images.html#4179" class="Bound">l2</a><a id="4213" class="Symbol">}</a> <a id="4215" class="Symbol">{</a><a id="4216" href="foundation.perfect-images.html#4216" class="Bound">f</a> <a id="4218" class="Symbol">:</a> <a id="4220" href="foundation.perfect-images.html#4192" class="Bound">A</a> <a id="4222" class="Symbol">→</a> <a id="4224" href="foundation.perfect-images.html#4204" class="Bound">B</a><a id="4225" class="Symbol">}</a> <a id="4227" class="Symbol">{</a><a id="4228" href="foundation.perfect-images.html#4228" class="Bound">g</a> <a id="4230" class="Symbol">:</a> <a id="4232" href="foundation.perfect-images.html#4204" class="Bound">B</a> <a id="4234" class="Symbol">→</a> <a id="4236" href="foundation.perfect-images.html#4192" class="Bound">A</a><a id="4237" class="Symbol">}</a>
  <a id="4241" class="Keyword">where</a>

  <a id="4250" href="foundation.perfect-images.html#4250" class="Function">previous-perfect-image</a> <a id="4273" class="Symbol">:</a>
    <a id="4279" class="Symbol">(</a><a id="4280" href="foundation.perfect-images.html#4280" class="Bound">a</a> <a id="4282" class="Symbol">:</a> <a id="4284" href="foundation.perfect-images.html#4192" class="Bound">A</a><a id="4285" class="Symbol">)</a> <a id="4287" class="Symbol">→</a>
    <a id="4293" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="4310" href="foundation.perfect-images.html#4216" class="Bound">f</a> <a id="4312" href="foundation.perfect-images.html#4228" class="Bound">g</a> <a id="4314" class="Symbol">(</a><a id="4315" href="foundation.perfect-images.html#4228" class="Bound">g</a> <a id="4317" class="Symbol">(</a><a id="4318" href="foundation.perfect-images.html#4216" class="Bound">f</a> <a id="4320" class="Symbol">(</a><a id="4321" href="foundation.perfect-images.html#4280" class="Bound">a</a><a id="4322" class="Symbol">)))</a> <a id="4326" class="Symbol">→</a>
    <a id="4332" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="4349" href="foundation.perfect-images.html#4216" class="Bound">f</a> <a id="4351" href="foundation.perfect-images.html#4228" class="Bound">g</a> <a id="4353" href="foundation.perfect-images.html#4280" class="Bound">a</a>
  <a id="4357" href="foundation.perfect-images.html#4250" class="Function">previous-perfect-image</a> <a id="4380" href="foundation.perfect-images.html#4380" class="Bound">a</a> <a id="4382" href="foundation.perfect-images.html#4382" class="Bound">γ</a> <a id="4384" href="foundation.perfect-images.html#4384" class="Bound">a₀</a> <a id="4387" href="foundation.perfect-images.html#4387" class="Bound">n</a> <a id="4389" href="foundation.perfect-images.html#4389" class="Bound">p</a> <a id="4391" class="Symbol">=</a> <a id="4393" href="foundation.perfect-images.html#4382" class="Bound">γ</a> <a id="4395" href="foundation.perfect-images.html#4384" class="Bound">a₀</a> <a id="4398" class="Symbol">(</a><a id="4399" href="elementary-number-theory.natural-numbers.html#1478" class="InductiveConstructor">succ-ℕ</a> <a id="4406" href="foundation.perfect-images.html#4387" class="Bound">n</a><a id="4407" class="Symbol">)</a> <a id="4409" class="Symbol">(</a><a id="4410" href="foundation-core.identity-types.html#4017" class="Function">ap</a> <a id="4413" class="Symbol">(</a><a id="4414" href="foundation.perfect-images.html#4228" class="Bound">g</a> <a id="4416" href="foundation-core.functions.html#407" class="Function Operator">∘</a> <a id="4418" href="foundation.perfect-images.html#4216" class="Bound">f</a><a id="4419" class="Symbol">)</a> <a id="4421" href="foundation.perfect-images.html#4389" class="Bound">p</a><a id="4422" class="Symbol">)</a>
</pre>
Perfect images goes to a disjoint place under `inverse-of-perfect-image` than `f`

<pre class="Agda"><a id="4520" class="Keyword">module</a> <a id="4527" href="foundation.perfect-images.html#4527" class="Module">_</a>
  <a id="4531" class="Symbol">{</a><a id="4532" href="foundation.perfect-images.html#4532" class="Bound">l1</a> <a id="4535" href="foundation.perfect-images.html#4535" class="Bound">l2</a> <a id="4538" class="Symbol">:</a> <a id="4540" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="4545" class="Symbol">}</a> <a id="4547" class="Symbol">{</a><a id="4548" href="foundation.perfect-images.html#4548" class="Bound">A</a> <a id="4550" class="Symbol">:</a> <a id="4552" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="4555" href="foundation.perfect-images.html#4532" class="Bound">l1</a><a id="4557" class="Symbol">}</a> <a id="4559" class="Symbol">{</a><a id="4560" href="foundation.perfect-images.html#4560" class="Bound">B</a> <a id="4562" class="Symbol">:</a> <a id="4564" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="4567" href="foundation.perfect-images.html#4535" class="Bound">l2</a><a id="4569" class="Symbol">}</a> <a id="4571" class="Symbol">{</a><a id="4572" href="foundation.perfect-images.html#4572" class="Bound">f</a> <a id="4574" class="Symbol">:</a> <a id="4576" href="foundation.perfect-images.html#4548" class="Bound">A</a> <a id="4578" class="Symbol">→</a> <a id="4580" href="foundation.perfect-images.html#4560" class="Bound">B</a><a id="4581" class="Symbol">}</a> <a id="4583" class="Symbol">{</a><a id="4584" href="foundation.perfect-images.html#4584" class="Bound">g</a> <a id="4586" class="Symbol">:</a> <a id="4588" href="foundation.perfect-images.html#4560" class="Bound">B</a> <a id="4590" class="Symbol">→</a> <a id="4592" href="foundation.perfect-images.html#4548" class="Bound">A</a><a id="4593" class="Symbol">}</a>
  <a id="4597" class="Keyword">where</a>

  <a id="4606" href="foundation.perfect-images.html#4606" class="Function">perfect-image-has-distinct-image</a> <a id="4639" class="Symbol">:</a>
    <a id="4645" class="Symbol">(</a><a id="4646" href="foundation.perfect-images.html#4646" class="Bound">a</a> <a id="4648" href="foundation.perfect-images.html#4648" class="Bound">a₀</a> <a id="4651" class="Symbol">:</a> <a id="4653" href="foundation.perfect-images.html#4548" class="Bound">A</a><a id="4654" class="Symbol">)</a> <a id="4656" class="Symbol">→</a> <a id="4658" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="4660" class="Symbol">(</a><a id="4661" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="4678" href="foundation.perfect-images.html#4572" class="Bound">f</a> <a id="4680" href="foundation.perfect-images.html#4584" class="Bound">g</a> <a id="4682" href="foundation.perfect-images.html#4646" class="Bound">a</a><a id="4683" class="Symbol">)</a> <a id="4685" class="Symbol">→</a> <a id="4687" class="Symbol">(</a><a id="4688" href="foundation.perfect-images.html#4688" class="Bound">ρ</a> <a id="4690" class="Symbol">:</a> <a id="4692" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="4709" href="foundation.perfect-images.html#4572" class="Bound">f</a> <a id="4711" href="foundation.perfect-images.html#4584" class="Bound">g</a> <a id="4713" href="foundation.perfect-images.html#4648" class="Bound">a₀</a><a id="4715" class="Symbol">)</a> <a id="4717" class="Symbol">→</a>
    <a id="4723" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="4725" class="Symbol">(</a><a id="4726" href="foundation-core.identity-types.html#1754" class="Datatype">Id</a> <a id="4729" class="Symbol">(</a><a id="4730" href="foundation.perfect-images.html#4572" class="Bound">f</a> <a id="4732" href="foundation.perfect-images.html#4646" class="Bound">a</a><a id="4733" class="Symbol">)</a> <a id="4735" class="Symbol">(</a><a id="4736" href="foundation.perfect-images.html#3373" class="Function">inverse-of-perfect-image</a> <a id="4761" href="foundation.perfect-images.html#4648" class="Bound">a₀</a> <a id="4764" href="foundation.perfect-images.html#4688" class="Bound">ρ</a><a id="4765" class="Symbol">))</a>
  <a id="4770" href="foundation.perfect-images.html#4606" class="Function">perfect-image-has-distinct-image</a> <a id="4803" href="foundation.perfect-images.html#4803" class="Bound">a</a> <a id="4805" href="foundation.perfect-images.html#4805" class="Bound">a₀</a> <a id="4808" href="foundation.perfect-images.html#4808" class="Bound">nρ</a> <a id="4811" href="foundation.perfect-images.html#4811" class="Bound">ρ</a> <a id="4813" href="foundation.perfect-images.html#4813" class="Bound">p</a> <a id="4815" class="Symbol">=</a> <a id="4817" href="foundation.perfect-images.html#5056" class="Function">v</a> <a id="4819" href="foundation.perfect-images.html#4811" class="Bound">ρ</a>
    <a id="4825" class="Keyword">where</a>
    <a id="4835" href="foundation.perfect-images.html#4835" class="Function">q</a> <a id="4837" class="Symbol">:</a> <a id="4839" href="foundation-core.identity-types.html#1754" class="Datatype">Id</a> <a id="4842" class="Symbol">(</a><a id="4843" href="foundation.perfect-images.html#4584" class="Bound">g</a> <a id="4845" class="Symbol">(</a><a id="4846" href="foundation.perfect-images.html#4572" class="Bound">f</a> <a id="4848" href="foundation.perfect-images.html#4803" class="Bound">a</a><a id="4849" class="Symbol">))</a> <a id="4852" href="foundation.perfect-images.html#4805" class="Bound">a₀</a>
    <a id="4859" href="foundation.perfect-images.html#4835" class="Function">q</a> <a id="4861" class="Symbol">=</a> <a id="4863" href="foundation-core.identity-types.html#4017" class="Function">ap</a> <a id="4866" href="foundation.perfect-images.html#4584" class="Bound">g</a> <a id="4868" href="foundation.perfect-images.html#4813" class="Bound">p</a> <a id="4870" href="foundation-core.identity-types.html#2412" class="Function Operator">∙</a> <a id="4872" href="foundation.perfect-images.html#3517" class="Function">is-sec-inverse-of-perfect-image</a> <a id="4904" href="foundation.perfect-images.html#4805" class="Bound">a₀</a> <a id="4907" href="foundation.perfect-images.html#4811" class="Bound">ρ</a>
                                                    
    <a id="4966" href="foundation.perfect-images.html#4966" class="Function">s</a> <a id="4968" class="Symbol">:</a> <a id="4970" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="4972" class="Symbol">(</a><a id="4973" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="4990" href="foundation.perfect-images.html#4572" class="Bound">f</a> <a id="4992" href="foundation.perfect-images.html#4584" class="Bound">g</a> <a id="4994" class="Symbol">(</a><a id="4995" href="foundation.perfect-images.html#4584" class="Bound">g</a> <a id="4997" class="Symbol">(</a><a id="4998" href="foundation.perfect-images.html#4572" class="Bound">f</a> <a id="5000" href="foundation.perfect-images.html#4803" class="Bound">a</a><a id="5001" class="Symbol">)))</a>
    <a id="5009" href="foundation.perfect-images.html#4966" class="Function">s</a> <a id="5011" class="Symbol">=</a> <a id="5013" class="Symbol">λ</a> <a id="5015" href="foundation.perfect-images.html#5015" class="Bound">η</a> <a id="5017" class="Symbol">→</a> <a id="5019" href="foundation.perfect-images.html#4808" class="Bound">nρ</a> <a id="5022" class="Symbol">(</a><a id="5023" href="foundation.perfect-images.html#4250" class="Function">previous-perfect-image</a> <a id="5046" href="foundation.perfect-images.html#4803" class="Bound">a</a> <a id="5048" href="foundation.perfect-images.html#5015" class="Bound">η</a><a id="5049" class="Symbol">)</a>

    <a id="5056" href="foundation.perfect-images.html#5056" class="Function">v</a> <a id="5058" class="Symbol">:</a> <a id="5060" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="5062" class="Symbol">(</a><a id="5063" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="5080" href="foundation.perfect-images.html#4572" class="Bound">f</a> <a id="5082" href="foundation.perfect-images.html#4584" class="Bound">g</a> <a id="5084" href="foundation.perfect-images.html#4805" class="Bound">a₀</a><a id="5086" class="Symbol">)</a>
    <a id="5092" href="foundation.perfect-images.html#5056" class="Function">v</a> <a id="5094" class="Symbol">=</a> <a id="5096" href="foundation-core.identity-types.html#5747" class="Function">tr</a> <a id="5099" class="Symbol">(λ</a> <a id="5102" href="foundation.perfect-images.html#5102" class="Bound">_</a> <a id="5104" class="Symbol">→</a> <a id="5106" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="5108" class="Symbol">(</a><a id="5109" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="5126" href="foundation.perfect-images.html#4572" class="Bound">f</a> <a id="5128" href="foundation.perfect-images.html#4584" class="Bound">g</a> <a id="5130" class="Symbol">_))</a> <a id="5134" href="foundation.perfect-images.html#4835" class="Function">q</a> <a id="5136" href="foundation.perfect-images.html#4966" class="Function">s</a>
</pre>
Using the property above, we can talk about origins of `a` which are not images of `g`.

<pre class="Agda"><a id="5240" class="Keyword">module</a> <a id="5247" href="foundation.perfect-images.html#5247" class="Module">_</a>
  <a id="5251" class="Symbol">{</a><a id="5252" href="foundation.perfect-images.html#5252" class="Bound">l1</a> <a id="5255" href="foundation.perfect-images.html#5255" class="Bound">l2</a> <a id="5258" class="Symbol">:</a> <a id="5260" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="5265" class="Symbol">}</a> <a id="5267" class="Symbol">{</a><a id="5268" href="foundation.perfect-images.html#5268" class="Bound">A</a> <a id="5270" class="Symbol">:</a> <a id="5272" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="5275" href="foundation.perfect-images.html#5252" class="Bound">l1</a><a id="5277" class="Symbol">}</a> <a id="5279" class="Symbol">{</a><a id="5280" href="foundation.perfect-images.html#5280" class="Bound">B</a> <a id="5282" class="Symbol">:</a> <a id="5284" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="5287" href="foundation.perfect-images.html#5255" class="Bound">l2</a><a id="5289" class="Symbol">}</a> <a id="5291" class="Symbol">{</a><a id="5292" href="foundation.perfect-images.html#5292" class="Bound">f</a> <a id="5294" class="Symbol">:</a> <a id="5296" href="foundation.perfect-images.html#5268" class="Bound">A</a> <a id="5298" class="Symbol">→</a> <a id="5300" href="foundation.perfect-images.html#5280" class="Bound">B</a><a id="5301" class="Symbol">}</a> <a id="5303" class="Symbol">{</a><a id="5304" href="foundation.perfect-images.html#5304" class="Bound">g</a> <a id="5306" class="Symbol">:</a> <a id="5308" href="foundation.perfect-images.html#5280" class="Bound">B</a> <a id="5310" class="Symbol">→</a> <a id="5312" href="foundation.perfect-images.html#5268" class="Bound">A</a><a id="5313" class="Symbol">}</a>
  <a id="5317" class="Keyword">where</a>

  <a id="5326" href="foundation.perfect-images.html#5326" class="Function">is-not-perfect-image</a> <a id="5347" class="Symbol">:</a> <a id="5349" class="Symbol">(</a><a id="5350" href="foundation.perfect-images.html#5350" class="Bound">a</a> <a id="5352" class="Symbol">:</a> <a id="5354" href="foundation.perfect-images.html#5268" class="Bound">A</a><a id="5355" class="Symbol">)</a> <a id="5357" class="Symbol">→</a> <a id="5359" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="5362" class="Symbol">(</a><a id="5363" href="foundation.perfect-images.html#5252" class="Bound">l1</a> <a id="5366" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="5368" href="foundation.perfect-images.html#5255" class="Bound">l2</a><a id="5370" class="Symbol">)</a>
  <a id="5374" href="foundation.perfect-images.html#5326" class="Function">is-not-perfect-image</a> <a id="5395" href="foundation.perfect-images.html#5395" class="Bound">a</a> <a id="5397" class="Symbol">=</a>
    <a id="5403" href="foundation-core.dependent-pair-types.html#502" class="Record">Σ</a> <a id="5405" href="foundation.perfect-images.html#5268" class="Bound">A</a> <a id="5407" class="Symbol">(λ</a> <a id="5410" href="foundation.perfect-images.html#5410" class="Bound">a₀</a> <a id="5413" class="Symbol">→</a> <a id="5415" class="Symbol">(</a><a id="5416" href="foundation-core.dependent-pair-types.html#502" class="Record">Σ</a> <a id="5418" href="elementary-number-theory.natural-numbers.html#1444" class="Datatype">ℕ</a> <a id="5420" class="Symbol">(λ</a> <a id="5423" href="foundation.perfect-images.html#5423" class="Bound">n</a> <a id="5425" class="Symbol">→</a>  <a id="5428" class="Symbol">(</a><a id="5429" href="foundation-core.identity-types.html#1754" class="Datatype">Id</a> <a id="5432" class="Symbol">((</a><a id="5434" href="foundation.iterating-functions.html#1797" class="Function">iterate</a> <a id="5442" href="foundation.perfect-images.html#5423" class="Bound">n</a> <a id="5444" class="Symbol">(</a><a id="5445" href="foundation.perfect-images.html#5304" class="Bound">g</a> <a id="5447" href="foundation-core.functions.html#407" class="Function Operator">∘</a> <a id="5449" href="foundation.perfect-images.html#5292" class="Bound">f</a><a id="5450" class="Symbol">))</a> <a id="5453" href="foundation.perfect-images.html#5410" class="Bound">a₀</a><a id="5455" class="Symbol">)</a> <a id="5457" href="foundation.perfect-images.html#5395" class="Bound">a</a><a id="5458" class="Symbol">)</a> <a id="5460" href="foundation-core.cartesian-product-types.html#577" class="Function Operator">×</a> <a id="5462" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="5464" class="Symbol">(</a><a id="5465" href="foundation-core.fibers-of-maps.html#928" class="Function">fib</a> <a id="5469" href="foundation.perfect-images.html#5304" class="Bound">g</a> <a id="5471" href="foundation.perfect-images.html#5410" class="Bound">a₀</a><a id="5473" class="Symbol">))))</a>
</pre>
If we assume law of excluded middle and `g` is embedding, we can prove that if `is-not-perfect-image a` does not hold, we have `is-perfect-image a`.

<pre class="Agda"><a id="5641" class="Keyword">module</a> <a id="5648" href="foundation.perfect-images.html#5648" class="Module">_</a>
  <a id="5652" class="Symbol">{</a><a id="5653" href="foundation.perfect-images.html#5653" class="Bound">l1</a> <a id="5656" href="foundation.perfect-images.html#5656" class="Bound">l2</a> <a id="5659" class="Symbol">:</a> <a id="5661" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="5666" class="Symbol">}</a> <a id="5668" class="Symbol">{</a><a id="5669" href="foundation.perfect-images.html#5669" class="Bound">A</a> <a id="5671" class="Symbol">:</a> <a id="5673" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="5676" href="foundation.perfect-images.html#5653" class="Bound">l1</a><a id="5678" class="Symbol">}</a> <a id="5680" class="Symbol">{</a><a id="5681" href="foundation.perfect-images.html#5681" class="Bound">B</a> <a id="5683" class="Symbol">:</a> <a id="5685" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="5688" href="foundation.perfect-images.html#5656" class="Bound">l2</a><a id="5690" class="Symbol">}</a>
  <a id="5694" class="Symbol">{</a><a id="5695" href="foundation.perfect-images.html#5695" class="Bound">f</a> <a id="5697" class="Symbol">:</a> <a id="5699" href="foundation.perfect-images.html#5669" class="Bound">A</a> <a id="5701" class="Symbol">→</a> <a id="5703" href="foundation.perfect-images.html#5681" class="Bound">B</a><a id="5704" class="Symbol">}</a> <a id="5706" class="Symbol">{</a><a id="5707" href="foundation.perfect-images.html#5707" class="Bound">g</a> <a id="5709" class="Symbol">:</a> <a id="5711" href="foundation.perfect-images.html#5681" class="Bound">B</a> <a id="5713" class="Symbol">→</a> <a id="5715" href="foundation.perfect-images.html#5669" class="Bound">A</a><a id="5716" class="Symbol">}</a> <a id="5718" class="Symbol">(</a><a id="5719" href="foundation.perfect-images.html#5719" class="Bound">is-emb-g</a> <a id="5728" class="Symbol">:</a> <a id="5730" href="foundation-core.embeddings.html#980" class="Function">is-emb</a> <a id="5737" href="foundation.perfect-images.html#5707" class="Bound">g</a><a id="5738" class="Symbol">)</a>
  <a id="5742" class="Symbol">(</a><a id="5743" href="foundation.perfect-images.html#5743" class="Bound">lem</a> <a id="5747" class="Symbol">:</a> <a id="5749" href="foundation.law-of-excluded-middle.html#733" class="Function">LEM</a> <a id="5753" class="Symbol">(</a><a id="5754" href="foundation.perfect-images.html#5653" class="Bound">l1</a> <a id="5757" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="5759" href="foundation.perfect-images.html#5656" class="Bound">l2</a><a id="5761" class="Symbol">))</a>
  <a id="5766" class="Keyword">where</a>

  <a id="5775" href="foundation.perfect-images.html#5775" class="Function">not-not-perfect-is-perfect</a> <a id="5802" class="Symbol">:</a>
    <a id="5808" class="Symbol">(</a><a id="5809" href="foundation.perfect-images.html#5809" class="Bound">a</a> <a id="5811" class="Symbol">:</a> <a id="5813" href="foundation.perfect-images.html#5669" class="Bound">A</a><a id="5814" class="Symbol">)</a> <a id="5816" class="Symbol">→</a>
    <a id="5822" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="5824" class="Symbol">(</a><a id="5825" href="foundation.perfect-images.html#5326" class="Function">is-not-perfect-image</a> <a id="5846" href="foundation.perfect-images.html#5809" class="Bound">a</a><a id="5847" class="Symbol">)</a> <a id="5849" class="Symbol">→</a>
    <a id="5855" class="Symbol">(</a><a id="5856" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="5873" href="foundation.perfect-images.html#5695" class="Bound">f</a> <a id="5875" href="foundation.perfect-images.html#5707" class="Bound">g</a> <a id="5877" href="foundation.perfect-images.html#5809" class="Bound">a</a><a id="5878" class="Symbol">)</a>
  <a id="5882" href="foundation.perfect-images.html#5775" class="Function">not-not-perfect-is-perfect</a> <a id="5909" href="foundation.perfect-images.html#5909" class="Bound">a</a> <a id="5911" href="foundation.perfect-images.html#5911" class="Bound">nρ</a> <a id="5914" href="foundation.perfect-images.html#5914" class="Bound">a₀</a> <a id="5917" href="foundation.perfect-images.html#5917" class="Bound">n</a> <a id="5919" href="foundation.perfect-images.html#5919" class="Bound">p</a> <a id="5921" class="Symbol">=</a>
    <a id="5927" href="foundation.coproduct-types.html#1284" class="Function">ind-coprod</a> <a id="5938" class="Symbol">_</a>
      <a id="5946" class="Symbol">(</a><a id="5947" href="foundation-core.functions.html#309" class="Function">id</a><a id="5949" class="Symbol">)</a>
      <a id="5957" class="Symbol">(λ</a> <a id="5960" href="foundation.perfect-images.html#5960" class="Bound">a₁</a> <a id="5963" class="Symbol">→</a> <a id="5965" href="foundation-core.empty-types.html#1147" class="Function">ex-falso</a> <a id="5974" class="Symbol">(</a><a id="5975" href="foundation.perfect-images.html#5911" class="Bound">nρ</a> <a id="5978" class="Symbol">(</a><a id="5979" href="foundation-core.dependent-pair-types.html#575" class="InductiveConstructor">pair</a> <a id="5984" href="foundation.perfect-images.html#5914" class="Bound">a₀</a> <a id="5987" class="Symbol">(</a><a id="5988" href="foundation-core.dependent-pair-types.html#575" class="InductiveConstructor">pair</a> <a id="5993" href="foundation.perfect-images.html#5917" class="Bound">n</a> <a id="5995" class="Symbol">(</a><a id="5996" href="foundation-core.dependent-pair-types.html#575" class="InductiveConstructor">pair</a> <a id="6001" href="foundation.perfect-images.html#5919" class="Bound">p</a> <a id="6003" href="foundation.perfect-images.html#5960" class="Bound">a₁</a><a id="6005" class="Symbol">)))))</a>
      <a id="6017" class="Symbol">(</a><a id="6018" href="foundation.perfect-images.html#5743" class="Bound">lem</a> <a id="6022" class="Symbol">(</a><a id="6023" href="foundation-core.dependent-pair-types.html#575" class="InductiveConstructor">pair</a> <a id="6028" class="Symbol">(</a><a id="6029" href="foundation-core.fibers-of-maps.html#928" class="Function">fib</a> <a id="6033" href="foundation.perfect-images.html#5707" class="Bound">g</a> <a id="6035" href="foundation.perfect-images.html#5914" class="Bound">a₀</a><a id="6037" class="Symbol">)</a> <a id="6039" class="Symbol">(</a><a id="6040" href="foundation-core.propositional-maps.html#1866" class="Function">is-prop-map-is-emb</a> <a id="6059" href="foundation.perfect-images.html#5719" class="Bound">is-emb-g</a> <a id="6068" href="foundation.perfect-images.html#5914" class="Bound">a₀</a><a id="6070" class="Symbol">)))</a>
</pre>
The following property states that if `g (b)` is not a perfect image, then `b` has an `f` fiber `a` that is not a perfect image for `g`. Again, we need to assume law of excluded middle and that both `g` and `f` are embedding.

<pre class="Agda"><a id="6314" class="Keyword">module</a> <a id="6321" href="foundation.perfect-images.html#6321" class="Module">_</a>
  <a id="6325" class="Symbol">{</a><a id="6326" href="foundation.perfect-images.html#6326" class="Bound">l1</a> <a id="6329" href="foundation.perfect-images.html#6329" class="Bound">l2</a> <a id="6332" class="Symbol">:</a> <a id="6334" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="6339" class="Symbol">}</a> <a id="6341" class="Symbol">{</a><a id="6342" href="foundation.perfect-images.html#6342" class="Bound">A</a> <a id="6344" class="Symbol">:</a> <a id="6346" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="6349" href="foundation.perfect-images.html#6326" class="Bound">l1</a><a id="6351" class="Symbol">}</a> <a id="6353" class="Symbol">{</a><a id="6354" href="foundation.perfect-images.html#6354" class="Bound">B</a> <a id="6356" class="Symbol">:</a> <a id="6358" href="foundation-core.universe-levels.html#222" class="Primitive">UU</a> <a id="6361" href="foundation.perfect-images.html#6329" class="Bound">l2</a><a id="6363" class="Symbol">}</a>
  <a id="6367" class="Symbol">{</a><a id="6368" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="6370" class="Symbol">:</a> <a id="6372" href="foundation.perfect-images.html#6342" class="Bound">A</a> <a id="6374" class="Symbol">→</a> <a id="6376" href="foundation.perfect-images.html#6354" class="Bound">B</a><a id="6377" class="Symbol">}</a> <a id="6379" class="Symbol">{</a><a id="6380" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="6382" class="Symbol">:</a> <a id="6384" href="foundation.perfect-images.html#6354" class="Bound">B</a> <a id="6386" class="Symbol">→</a> <a id="6388" href="foundation.perfect-images.html#6342" class="Bound">A</a><a id="6389" class="Symbol">}</a>
  <a id="6393" class="Symbol">(</a><a id="6394" href="foundation.perfect-images.html#6394" class="Bound">is-emb-f</a> <a id="6403" class="Symbol">:</a> <a id="6405" href="foundation-core.embeddings.html#980" class="Function">is-emb</a> <a id="6412" href="foundation.perfect-images.html#6368" class="Bound">f</a><a id="6413" class="Symbol">)</a> <a id="6415" class="Symbol">(</a><a id="6416" href="foundation.perfect-images.html#6416" class="Bound">is-emb-g</a> <a id="6425" class="Symbol">:</a> <a id="6427" href="foundation-core.embeddings.html#980" class="Function">is-emb</a> <a id="6434" href="foundation.perfect-images.html#6380" class="Bound">g</a><a id="6435" class="Symbol">)</a>
  <a id="6439" class="Symbol">(</a><a id="6440" href="foundation.perfect-images.html#6440" class="Bound">lem</a> <a id="6444" class="Symbol">:</a> <a id="6446" href="foundation.law-of-excluded-middle.html#733" class="Function">LEM</a> <a id="6450" class="Symbol">(</a><a id="6451" href="foundation.perfect-images.html#6326" class="Bound">l1</a> <a id="6454" href="Agda.Primitive.html#810" class="Primitive Operator">⊔</a> <a id="6456" href="foundation.perfect-images.html#6329" class="Bound">l2</a><a id="6458" class="Symbol">))</a>
  <a id="6463" class="Keyword">where</a>

  <a id="6472" href="foundation.perfect-images.html#6472" class="Function">not-perfect-image-has-not-perfect-fiber</a> <a id="6512" class="Symbol">:</a>
      <a id="6520" class="Symbol">(</a><a id="6521" href="foundation.perfect-images.html#6521" class="Bound">b</a> <a id="6523" class="Symbol">:</a> <a id="6525" href="foundation.perfect-images.html#6354" class="Bound">B</a><a id="6526" class="Symbol">)</a> <a id="6528" class="Symbol">→</a>
      <a id="6536" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="6538" class="Symbol">(</a><a id="6539" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="6556" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="6558" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="6560" class="Symbol">(</a><a id="6561" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="6563" href="foundation.perfect-images.html#6521" class="Bound">b</a><a id="6564" class="Symbol">))</a> <a id="6567" class="Symbol">→</a>
      <a id="6575" href="foundation-core.dependent-pair-types.html#502" class="Record">Σ</a> <a id="6577" class="Symbol">(</a><a id="6578" href="foundation-core.fibers-of-maps.html#928" class="Function">fib</a> <a id="6582" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="6584" href="foundation.perfect-images.html#6521" class="Bound">b</a><a id="6585" class="Symbol">)</a> <a id="6587" class="Symbol">(λ</a> <a id="6590" href="foundation.perfect-images.html#6590" class="Bound">s</a> <a id="6592" class="Symbol">→</a> <a id="6594" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="6596" class="Symbol">(</a><a id="6597" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="6614" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="6616" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="6618" class="Symbol">(</a><a id="6619" href="foundation-core.dependent-pair-types.html#592" class="Field">pr1</a> <a id="6623" href="foundation.perfect-images.html#6590" class="Bound">s</a><a id="6624" class="Symbol">)))</a>
  <a id="6630" href="foundation.perfect-images.html#6472" class="Function">not-perfect-image-has-not-perfect-fiber</a> <a id="6670" href="foundation.perfect-images.html#6670" class="Bound">b</a> <a id="6672" href="foundation.perfect-images.html#6672" class="Bound">nρ</a> <a id="6675" class="Symbol">=</a> <a id="6677" href="foundation.perfect-images.html#7659" class="Function">v</a>
      <a id="6685" class="Keyword">where</a>
      <a id="6697" href="foundation.perfect-images.html#6697" class="Function">i</a> <a id="6699" class="Symbol">:</a> <a id="6701" href="foundation.double-negation.html#806" class="Function">¬¬</a> <a id="6704" class="Symbol">(</a><a id="6705" href="foundation.perfect-images.html#5326" class="Function">is-not-perfect-image</a> <a id="6726" class="Symbol">{</a><a id="6727" class="Argument">f</a> <a id="6729" class="Symbol">=</a> <a id="6731" href="foundation.perfect-images.html#6368" class="Bound">f</a><a id="6732" class="Symbol">}</a> <a id="6734" class="Symbol">(</a><a id="6735" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="6737" href="foundation.perfect-images.html#6670" class="Bound">b</a><a id="6738" class="Symbol">))</a>
      <a id="6747" href="foundation.perfect-images.html#6697" class="Function">i</a> <a id="6749" class="Symbol">=</a> <a id="6751" class="Symbol">λ</a> <a id="6753" href="foundation.perfect-images.html#6753" class="Bound">nμ</a> <a id="6756" class="Symbol">→</a> <a id="6758" href="foundation.perfect-images.html#6672" class="Bound">nρ</a> <a id="6761" class="Symbol">(</a><a id="6762" href="foundation.perfect-images.html#5775" class="Function">not-not-perfect-is-perfect</a> <a id="6789" href="foundation.perfect-images.html#6416" class="Bound">is-emb-g</a> <a id="6798" href="foundation.perfect-images.html#6440" class="Bound">lem</a> <a id="6802" class="Symbol">(</a><a id="6803" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="6805" href="foundation.perfect-images.html#6670" class="Bound">b</a><a id="6806" class="Symbol">)</a> <a id="6808" href="foundation.perfect-images.html#6753" class="Bound">nμ</a><a id="6810" class="Symbol">)</a>

      <a id="6819" href="foundation.perfect-images.html#6819" class="Function">ii</a> <a id="6822" class="Symbol">:</a>
        <a id="6832" href="foundation.perfect-images.html#5326" class="Function">is-not-perfect-image</a> <a id="6853" class="Symbol">(</a><a id="6854" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="6856" href="foundation.perfect-images.html#6670" class="Bound">b</a><a id="6857" class="Symbol">)</a> <a id="6859" class="Symbol">→</a>
        <a id="6869" href="foundation-core.dependent-pair-types.html#502" class="Record">Σ</a> <a id="6871" class="Symbol">(</a><a id="6872" href="foundation-core.fibers-of-maps.html#928" class="Function">fib</a> <a id="6876" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="6878" href="foundation.perfect-images.html#6670" class="Bound">b</a><a id="6879" class="Symbol">)</a> <a id="6881" class="Symbol">(λ</a> <a id="6884" href="foundation.perfect-images.html#6884" class="Bound">s</a> <a id="6886" class="Symbol">→</a> <a id="6888" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="6890" class="Symbol">(</a><a id="6891" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="6908" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="6910" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="6912" class="Symbol">(</a><a id="6913" href="foundation-core.dependent-pair-types.html#592" class="Field">pr1</a> <a id="6917" href="foundation.perfect-images.html#6884" class="Bound">s</a><a id="6918" class="Symbol">)))</a>
      <a id="6928" href="foundation.perfect-images.html#6819" class="Function">ii</a> <a id="6931" class="Symbol">(</a><a id="6932" href="foundation-core.dependent-pair-types.html#575" class="InductiveConstructor">pair</a> <a id="6937" href="foundation.perfect-images.html#6937" class="Bound">x₀</a> <a id="6940" class="Symbol">(</a><a id="6941" href="foundation-core.dependent-pair-types.html#575" class="InductiveConstructor">pair</a> <a id="6946" href="elementary-number-theory.natural-numbers.html#1465" class="InductiveConstructor">zero-ℕ</a> <a id="6953" href="foundation.perfect-images.html#6953" class="Bound">u</a><a id="6954" class="Symbol">))</a> <a id="6957" class="Symbol">=</a>
        <a id="6967" href="foundation-core.empty-types.html#1147" class="Function">ex-falso</a> <a id="6976" class="Symbol">(</a><a id="6977" href="foundation-core.dependent-pair-types.html#604" class="Field">pr2</a> <a id="6981" href="foundation.perfect-images.html#6953" class="Bound">u</a> <a id="6983" class="Symbol">(</a><a id="6984" href="foundation-core.dependent-pair-types.html#575" class="InductiveConstructor">pair</a> <a id="6989" href="foundation.perfect-images.html#6670" class="Bound">b</a> <a id="6991" class="Symbol">(</a><a id="6992" href="foundation-core.identity-types.html#2716" class="Function">inv</a> <a id="6996" class="Symbol">(</a><a id="6997" href="foundation-core.dependent-pair-types.html#592" class="Field">pr1</a> <a id="7001" href="foundation.perfect-images.html#6953" class="Bound">u</a><a id="7002" class="Symbol">))))</a>
      <a id="7013" href="foundation.perfect-images.html#6819" class="Function">ii</a> <a id="7016" class="Symbol">(</a><a id="7017" href="foundation-core.dependent-pair-types.html#575" class="InductiveConstructor">pair</a> <a id="7022" href="foundation.perfect-images.html#7022" class="Bound">x₀</a> <a id="7025" class="Symbol">(</a><a id="7026" href="foundation-core.dependent-pair-types.html#575" class="InductiveConstructor">pair</a> <a id="7031" class="Symbol">(</a><a id="7032" href="elementary-number-theory.natural-numbers.html#1478" class="InductiveConstructor">succ-ℕ</a> <a id="7039" href="foundation.perfect-images.html#7039" class="Bound">n</a><a id="7040" class="Symbol">)</a> <a id="7042" href="foundation.perfect-images.html#7042" class="Bound">u</a><a id="7043" class="Symbol">))</a> <a id="7046" class="Symbol">=</a> <a id="7048" href="foundation-core.dependent-pair-types.html#575" class="InductiveConstructor">pair</a> <a id="7053" href="foundation.perfect-images.html#7175" class="Function">a</a> <a id="7055" href="foundation.perfect-images.html#7241" class="Function">w</a>
        <a id="7065" class="Keyword">where</a>
        <a id="7079" href="foundation.perfect-images.html#7079" class="Function">q</a> <a id="7081" class="Symbol">:</a> <a id="7083" href="foundation-core.identity-types.html#1754" class="Datatype">Id</a> <a id="7086" class="Symbol">(</a><a id="7087" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="7089" class="Symbol">((</a><a id="7091" href="foundation.iterating-functions.html#1797" class="Function">iterate</a> <a id="7099" href="foundation.perfect-images.html#7039" class="Bound">n</a> <a id="7101" class="Symbol">(</a><a id="7102" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="7104" href="foundation-core.functions.html#407" class="Function Operator">∘</a> <a id="7106" href="foundation.perfect-images.html#6368" class="Bound">f</a><a id="7107" class="Symbol">))</a> <a id="7110" href="foundation.perfect-images.html#7022" class="Bound">x₀</a><a id="7112" class="Symbol">))</a> <a id="7115" href="foundation.perfect-images.html#6670" class="Bound">b</a>
        <a id="7125" href="foundation.perfect-images.html#7079" class="Function">q</a> <a id="7127" class="Symbol">=</a> <a id="7129" href="foundation.injective-maps.html#3649" class="Function">is-injective-is-emb</a> <a id="7149" href="foundation.perfect-images.html#6416" class="Bound">is-emb-g</a> <a id="7158" class="Symbol">(</a><a id="7159" href="foundation-core.dependent-pair-types.html#592" class="Field">pr1</a> <a id="7163" href="foundation.perfect-images.html#7042" class="Bound">u</a><a id="7164" class="Symbol">)</a>

        <a id="7175" href="foundation.perfect-images.html#7175" class="Function">a</a> <a id="7177" class="Symbol">:</a> <a id="7179" href="foundation-core.fibers-of-maps.html#928" class="Function">fib</a> <a id="7183" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="7185" href="foundation.perfect-images.html#6670" class="Bound">b</a>
        <a id="7195" href="foundation.perfect-images.html#7175" class="Function">a</a> <a id="7197" class="Symbol">=</a> <a id="7199" href="foundation-core.dependent-pair-types.html#575" class="InductiveConstructor">pair</a> <a id="7204" class="Symbol">((</a><a id="7206" href="foundation.iterating-functions.html#1797" class="Function">iterate</a> <a id="7214" href="foundation.perfect-images.html#7039" class="Bound">n</a> <a id="7216" class="Symbol">(</a><a id="7217" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="7219" href="foundation-core.functions.html#407" class="Function Operator">∘</a> <a id="7221" href="foundation.perfect-images.html#6368" class="Bound">f</a><a id="7222" class="Symbol">))</a> <a id="7225" href="foundation.perfect-images.html#7022" class="Bound">x₀</a><a id="7227" class="Symbol">)</a>  <a id="7230" href="foundation.perfect-images.html#7079" class="Function">q</a>

        <a id="7241" href="foundation.perfect-images.html#7241" class="Function">w</a> <a id="7243" class="Symbol">:</a> <a id="7245" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="7247" class="Symbol">(</a><a id="7248" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="7265" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="7267" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="7269" class="Symbol">((</a><a id="7271" href="foundation.iterating-functions.html#1797" class="Function">iterate</a> <a id="7279" href="foundation.perfect-images.html#7039" class="Bound">n</a> <a id="7281" class="Symbol">(</a><a id="7282" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="7284" href="foundation-core.functions.html#407" class="Function Operator">∘</a> <a id="7286" href="foundation.perfect-images.html#6368" class="Bound">f</a><a id="7287" class="Symbol">))</a> <a id="7290" href="foundation.perfect-images.html#7022" class="Bound">x₀</a><a id="7292" class="Symbol">))</a>
        <a id="7303" href="foundation.perfect-images.html#7241" class="Function">w</a> <a id="7305" class="Symbol">=</a> <a id="7307" class="Symbol">λ</a> <a id="7309" href="foundation.perfect-images.html#7309" class="Bound">s</a> <a id="7311" class="Symbol">→</a> <a id="7313" href="foundation-core.dependent-pair-types.html#604" class="Field">pr2</a> <a id="7317" href="foundation.perfect-images.html#7042" class="Bound">u</a> <a id="7319" class="Symbol">(</a><a id="7320" href="foundation.perfect-images.html#7309" class="Bound">s</a> <a id="7322" href="foundation.perfect-images.html#7022" class="Bound">x₀</a> <a id="7325" href="foundation.perfect-images.html#7039" class="Bound">n</a> <a id="7327" href="foundation-core.identity-types.html#1807" class="InductiveConstructor">refl</a><a id="7331" class="Symbol">)</a>

      <a id="7340" href="foundation.perfect-images.html#7340" class="Function">iii</a> <a id="7344" class="Symbol">:</a> <a id="7346" href="foundation.double-negation.html#806" class="Function">¬¬</a> <a id="7349" class="Symbol">(</a><a id="7350" href="foundation-core.dependent-pair-types.html#502" class="Record">Σ</a> <a id="7352" class="Symbol">(</a><a id="7353" href="foundation-core.fibers-of-maps.html#928" class="Function">fib</a> <a id="7357" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="7359" href="foundation.perfect-images.html#6670" class="Bound">b</a><a id="7360" class="Symbol">)</a> <a id="7362" class="Symbol">(λ</a> <a id="7365" href="foundation.perfect-images.html#7365" class="Bound">s</a> <a id="7367" class="Symbol">→</a> <a id="7369" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="7371" class="Symbol">(</a><a id="7372" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="7389" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="7391" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="7393" class="Symbol">(</a><a id="7394" href="foundation-core.dependent-pair-types.html#592" class="Field">pr1</a> <a id="7398" href="foundation.perfect-images.html#7365" class="Bound">s</a><a id="7399" class="Symbol">))))</a>
      <a id="7410" href="foundation.perfect-images.html#7340" class="Function">iii</a> <a id="7414" class="Symbol">=</a> <a id="7416" class="Symbol">λ</a> <a id="7418" href="foundation.perfect-images.html#7418" class="Bound">t</a> <a id="7420" class="Symbol">→</a> <a id="7422" href="foundation.perfect-images.html#6697" class="Function">i</a> <a id="7424" class="Symbol">(λ</a> <a id="7427" href="foundation.perfect-images.html#7427" class="Bound">s</a> <a id="7429" class="Symbol">→</a> <a id="7431" href="foundation.perfect-images.html#7418" class="Bound">t</a> <a id="7433" class="Symbol">(</a><a id="7434" href="foundation.perfect-images.html#6819" class="Function">ii</a> <a id="7437" href="foundation.perfect-images.html#7427" class="Bound">s</a><a id="7438" class="Symbol">))</a>

      <a id="7448" href="foundation.perfect-images.html#7448" class="Function">iv</a> <a id="7451" class="Symbol">:</a> <a id="7453" href="foundation-core.propositions.html#1295" class="Function">is-prop</a> <a id="7461" class="Symbol">(</a><a id="7462" href="foundation-core.dependent-pair-types.html#502" class="Record">Σ</a> <a id="7464" class="Symbol">(</a><a id="7465" href="foundation-core.fibers-of-maps.html#928" class="Function">fib</a> <a id="7469" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="7471" href="foundation.perfect-images.html#6670" class="Bound">b</a><a id="7472" class="Symbol">)</a> <a id="7474" class="Symbol">(λ</a> <a id="7477" href="foundation.perfect-images.html#7477" class="Bound">s</a> <a id="7479" class="Symbol">→</a> <a id="7481" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="7483" class="Symbol">(</a><a id="7484" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="7501" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="7503" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="7505" class="Symbol">(</a><a id="7506" href="foundation-core.dependent-pair-types.html#592" class="Field">pr1</a> <a id="7510" href="foundation.perfect-images.html#7477" class="Bound">s</a><a id="7511" class="Symbol">))))</a>
      <a id="7522" href="foundation.perfect-images.html#7448" class="Function">iv</a> <a id="7525" class="Symbol">=</a>
        <a id="7535" href="foundation-core.propositions.html#5070" class="Function">is-prop-Σ</a>
          <a id="7555" class="Symbol">(</a><a id="7556" href="foundation-core.propositional-maps.html#1866" class="Function">is-prop-map-is-emb</a> <a id="7575" href="foundation.perfect-images.html#6394" class="Bound">is-emb-f</a> <a id="7584" href="foundation.perfect-images.html#6670" class="Bound">b</a><a id="7585" class="Symbol">)</a>
          <a id="7597" class="Symbol">(λ</a> <a id="7600" href="foundation.perfect-images.html#7600" class="Bound">s</a> <a id="7602" class="Symbol">→</a> <a id="7604" href="foundation.negation.html#942" class="Function">is-prop-neg</a> <a id="7616" class="Symbol">{</a><a id="7617" class="Argument">A</a> <a id="7619" class="Symbol">=</a> <a id="7621" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="7638" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="7640" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="7642" class="Symbol">(</a><a id="7643" href="foundation-core.dependent-pair-types.html#592" class="Field">pr1</a> <a id="7647" href="foundation.perfect-images.html#7600" class="Bound">s</a><a id="7648" class="Symbol">)})</a>

      <a id="7659" href="foundation.perfect-images.html#7659" class="Function">v</a> <a id="7661" class="Symbol">:</a> <a id="7663" href="foundation-core.dependent-pair-types.html#502" class="Record">Σ</a> <a id="7665" class="Symbol">(</a><a id="7666" href="foundation-core.fibers-of-maps.html#928" class="Function">fib</a> <a id="7670" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="7672" href="foundation.perfect-images.html#6670" class="Bound">b</a><a id="7673" class="Symbol">)</a> <a id="7675" class="Symbol">(λ</a> <a id="7678" href="foundation.perfect-images.html#7678" class="Bound">s</a> <a id="7680" class="Symbol">→</a> <a id="7682" href="foundation-core.negation.html#452" class="Function">¬</a> <a id="7684" class="Symbol">(</a><a id="7685" href="foundation.perfect-images.html#1702" class="Function">is-perfect-image</a> <a id="7702" href="foundation.perfect-images.html#6368" class="Bound">f</a> <a id="7704" href="foundation.perfect-images.html#6380" class="Bound">g</a> <a id="7706" class="Symbol">(</a><a id="7707" href="foundation-core.dependent-pair-types.html#592" class="Field">pr1</a> <a id="7711" href="foundation.perfect-images.html#7678" class="Bound">s</a><a id="7712" class="Symbol">)))</a>
      <a id="7722" href="foundation.perfect-images.html#7659" class="Function">v</a> <a id="7724" class="Symbol">=</a> <a id="7726" href="foundation.decidable-types.html#6083" class="Function">dn-elim-is-decidable</a> <a id="7747" class="Symbol">_</a> <a id="7749" class="Symbol">(</a><a id="7750" href="foundation.perfect-images.html#6440" class="Bound">lem</a> <a id="7754" class="Symbol">(</a><a id="7755" href="foundation-core.dependent-pair-types.html#575" class="InductiveConstructor">pair</a> <a id="7760" class="Symbol">_</a> <a id="7762" href="foundation.perfect-images.html#7448" class="Function">iv</a><a id="7764" class="Symbol">))</a> <a id="7767" href="foundation.perfect-images.html#7340" class="Function">iii</a>
</pre>